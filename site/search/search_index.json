{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Autonomous UAV Implementation and Simulation for Drone Development This documentation describes the design, implementation and simulation of an open-source companion computer autonomy stack for PX4-based unmanned aerial vehicles (UAVs). The project focues on companion-side software architecture, safety supervision, and reproducible development workflows rather than flight-controller firmware or vehicle-specific hardware. Motivation Modern autonomous UAV systems rely on a compnaion computer to perform perception, planning, and mission logic while delegating low-level stabilization and actuation to a flight controller usch as PX4. While PX4 provides documentation for Offboard control and communication interfaces, guidance on how to architect companion-side autonomy is limited and often fragmented. Most publically available resources focus on: Basic ROS2 setup and message passing. Minimal examples of Offboard setpoint publishing. In practice, production-grade systems require significantly more structure: supervision, fault handling, deterministic control itnerfaces, and clear seperation between decision logic and actuation. While these patterns are well established in ground robtotics, existing frameworks such as Nav2 are not directly applicable to flight robots. Many mature companion-computer autonomy stacks are proprietary, domain-specific, or tightly coupled to internal company infrastructure, limiting their usefullness as a learning resrouce or reusable foundations for research and development. This project is motivated by the need for: A clear, open reference architecture for UAV companion computers. Practical workflows for development, testing, and simulation. A foundation that can be extended to different levels of autonomy, missions, and research use-cases without rewriting the core framework. Scope The scope of this documentaiton is strictly limitd to the companion computer software layer and its interaction with PX4 through Offboard control interfaces. Description Software Stack Table of Contents","title":"Home"},{"location":"#autonomous-uav-implementation-and-simulation-for-drone-development","text":"This documentation describes the design, implementation and simulation of an open-source companion computer autonomy stack for PX4-based unmanned aerial vehicles (UAVs). The project focues on companion-side software architecture, safety supervision, and reproducible development workflows rather than flight-controller firmware or vehicle-specific hardware.","title":"Autonomous UAV Implementation and Simulation for Drone Development"},{"location":"#motivation","text":"Modern autonomous UAV systems rely on a compnaion computer to perform perception, planning, and mission logic while delegating low-level stabilization and actuation to a flight controller usch as PX4. While PX4 provides documentation for Offboard control and communication interfaces, guidance on how to architect companion-side autonomy is limited and often fragmented. Most publically available resources focus on: Basic ROS2 setup and message passing. Minimal examples of Offboard setpoint publishing. In practice, production-grade systems require significantly more structure: supervision, fault handling, deterministic control itnerfaces, and clear seperation between decision logic and actuation. While these patterns are well established in ground robtotics, existing frameworks such as Nav2 are not directly applicable to flight robots. Many mature companion-computer autonomy stacks are proprietary, domain-specific, or tightly coupled to internal company infrastructure, limiting their usefullness as a learning resrouce or reusable foundations for research and development. This project is motivated by the need for: A clear, open reference architecture for UAV companion computers. Practical workflows for development, testing, and simulation. A foundation that can be extended to different levels of autonomy, missions, and research use-cases without rewriting the core framework.","title":"Motivation"},{"location":"#scope","text":"The scope of this documentaiton is strictly limitd to the companion computer software layer and its interaction with PX4 through Offboard control interfaces.","title":"Scope"},{"location":"#description","text":"","title":"Description"},{"location":"#software-stack","text":"","title":"Software Stack"},{"location":"#table-of-contents","text":"","title":"Table of Contents"},{"location":"architecture/control/","text":"","title":"Control Layer"},{"location":"architecture/decision/","text":"","title":"Decision Layer"},{"location":"architecture/lifecycle/","text":"","title":"System Lifecycles"},{"location":"architecture/overview/","text":"UAV Lease-Gated Autonomy Stack This section provides a high-level overview of the UAV Lease-Gated Autonomy Stack , a software archiecture built on top of ROS2 for autonomous drone systems. The core design philosphy is explicit, revocable authorization and deterministic safety enforcement, seperating concerns of system health monitoring, control, and decision-making. The Lease Gate The system is built around the concept of a Lease Gate. This is a time-bounded authorization barrier that sits between the autonomy logic of the companion computer (CC) and the flight controller (FC). It acts as a deterministic switch: Granted : When a valid, unexpired lease is active, authorized control commands are allowed to pass through to the FC. Revoked/Expired : The gate immediately blocks all actuation commands. The control software must cease and may only hold position or execute predefined safe behavior. A lease is a short-lived token granted by the supervisor only when a strict set of safety preconditions are met. This ensures that autonomy is never assumed, but always permitted within a known-safe envelope. Layers of the Stack The stack is logically divided into three distinct layers: Supervisor Layer , Control Layer , and the Decision Layer . Each with a specific responsibility and well defined interfaces between them. Supervisor Layer The supervisor is the ultimate authority for autonomous operation. It coninuously monitors the entire system and decides if and under what constraints autonomy is allowed. When a fault is detected, the supervisor is responsible for enforcing the appropriate responsed according to predefiend policy. Lease Manager : Responsible for granting or revoking control leases to the control layer. Lease is granted under certain preconditions and if those preconditions fail, the lease is revoked. Health Monitor : Responsible for verifying the liveliness of the decision and control layers, monitoring the control loop, watching for FC failsafe flags, monitoring CC resources, and fault handling. Fault Handler : Executes predefined response policies when faults are detected such as mode switching, lease revocation, and emergency procedures. If PX4 leaves OFFBOARD mode due to RC override, internal failsafe, or manual mode switch the supervisor immediately revokes any active leases. Control Layer The control layer is responsible for converting high-level intent actions into FC compatible commands when authorized through a lease. Lease Gate : Only passes actuation commands when the lease is valid. Intent Arbiter : Processes the single intent stream from the decision layer, applying priority and envelope checks. Envelope Validator : Applies detemrinistic safety filters to all commands, ensuring they remain within the vehicle's physical limits, geofence boundaries, and operational constraints. FC Offboard Interface : Maintains the PX4 offboard handshake (2Hz minimum heartbeat) and executes a fixed-rate control loop (20-50Hz). Publishes safe hold setpoints when autonomy is not authorized. Decision Layer The deicison layer determines what the vehicle should do based on mission objectives, sensor data, and environmental context. Behavior Tree Engine : Executes modular, composable behaviors with priority-based arbitration. Higher-priority safet behaviores can preempt mission tasks. TODO The decison layer produces advisory intent only, it has no direct command authority. All intent must pass through the control layer's safety validation and lease gating.","title":"Overview"},{"location":"architecture/overview/#uav-lease-gated-autonomy-stack","text":"This section provides a high-level overview of the UAV Lease-Gated Autonomy Stack , a software archiecture built on top of ROS2 for autonomous drone systems. The core design philosphy is explicit, revocable authorization and deterministic safety enforcement, seperating concerns of system health monitoring, control, and decision-making.","title":"UAV Lease-Gated Autonomy Stack"},{"location":"architecture/overview/#the-lease-gate","text":"The system is built around the concept of a Lease Gate. This is a time-bounded authorization barrier that sits between the autonomy logic of the companion computer (CC) and the flight controller (FC). It acts as a deterministic switch: Granted : When a valid, unexpired lease is active, authorized control commands are allowed to pass through to the FC. Revoked/Expired : The gate immediately blocks all actuation commands. The control software must cease and may only hold position or execute predefined safe behavior. A lease is a short-lived token granted by the supervisor only when a strict set of safety preconditions are met. This ensures that autonomy is never assumed, but always permitted within a known-safe envelope.","title":"The Lease Gate"},{"location":"architecture/overview/#layers-of-the-stack","text":"The stack is logically divided into three distinct layers: Supervisor Layer , Control Layer , and the Decision Layer . Each with a specific responsibility and well defined interfaces between them.","title":"Layers of the Stack"},{"location":"architecture/overview/#supervisor-layer","text":"The supervisor is the ultimate authority for autonomous operation. It coninuously monitors the entire system and decides if and under what constraints autonomy is allowed. When a fault is detected, the supervisor is responsible for enforcing the appropriate responsed according to predefiend policy. Lease Manager : Responsible for granting or revoking control leases to the control layer. Lease is granted under certain preconditions and if those preconditions fail, the lease is revoked. Health Monitor : Responsible for verifying the liveliness of the decision and control layers, monitoring the control loop, watching for FC failsafe flags, monitoring CC resources, and fault handling. Fault Handler : Executes predefined response policies when faults are detected such as mode switching, lease revocation, and emergency procedures. If PX4 leaves OFFBOARD mode due to RC override, internal failsafe, or manual mode switch the supervisor immediately revokes any active leases.","title":"Supervisor Layer"},{"location":"architecture/overview/#control-layer","text":"The control layer is responsible for converting high-level intent actions into FC compatible commands when authorized through a lease. Lease Gate : Only passes actuation commands when the lease is valid. Intent Arbiter : Processes the single intent stream from the decision layer, applying priority and envelope checks. Envelope Validator : Applies detemrinistic safety filters to all commands, ensuring they remain within the vehicle's physical limits, geofence boundaries, and operational constraints. FC Offboard Interface : Maintains the PX4 offboard handshake (2Hz minimum heartbeat) and executes a fixed-rate control loop (20-50Hz). Publishes safe hold setpoints when autonomy is not authorized.","title":"Control Layer"},{"location":"architecture/overview/#decision-layer","text":"The deicison layer determines what the vehicle should do based on mission objectives, sensor data, and environmental context. Behavior Tree Engine : Executes modular, composable behaviors with priority-based arbitration. Higher-priority safet behaviores can preempt mission tasks. TODO The decison layer produces advisory intent only, it has no direct command authority. All intent must pass through the control layer's safety validation and lease gating.","title":"Decision Layer"},{"location":"architecture/supervisor/","text":"Supervisor/Watchdog Layer The supervisor is the safety authority of the companion computer. It determines whether autonomy is allowed to act, under what constraints can autonomy act, and what actions must occur to keep the drone in a safe state. The architecture is designed around the PX4 authority model which treats offboard control as advisory, revocable and non-authoritative. PX4 Authority model notes: - supervisor works on top of PX4 safety, PX4 can independelty trigger failsafes and change modes and the supervisor will be able to react by revoking lease and maintaining a safe internal state. Supervisor Position in Stack The Supervisor sits above the Control and Decision layers in terms of authority, but has a different set of responsibilities The decision layer decides what the system would like to do. The control alyer decides how to safety express those decision to the flight controller. The supervisor decide whether either of those layers is allowed to influence the vehicle at all. The supervisor's responsiblity is to authorize autonomy, send explcit directives to the control layer to perform safe actions, and classify faults to determine what directive to take. The supervisor does not have direct communication to the flight controller so if the supervisor needs to perfrom an action in the name of safety it must do so through control layer directives. Lease Manager The lease manager is the supervisor's primary enforcement mechanmism for the execution of autonomy in the stack. The lease manager has the following responsibilities: Grant leases to the control layer when certain preconditions are met. Periodically renew leases while conditions remain valid. Revoke leases. Examples of reasons to revoke a lease: safety violation, fault classification requiring loss of autonomy, loss of heartbeat from control or decision layers, or PX4 flightmode change out of offboard. Each layer that is under the Supervisor is lease-gated. The control layer is lease-gated from actuation (commands send to PX4 based off of intent by the decision layer) and the decision layer is gated from sending intent to the control layer. Control layer will still be able to send fallback setpoints to the flight controller even if the lease is invalid, it will also send commands to maintain the handshake between the control layer and the flight controller. The lease only gates commands that was previously intent from the decision layer. TODO what are precondixtoins for granting/renewing a lease? TODO how long is a lease and when does it get renewed? Health Monitoring The supervisor continuously monitors the health of the software running in the stack, the hardware that the stack is running on, and the condition of the flight controller. Monitors heartbeats from the control and decision layer. Heartbeat loss is treated as a fault and will be handled in fault classification. Monitor the control loop in the control layer to ensure that timing is being met. Monitor vehicle health given information from the flight controller. This could include failsafe flags, estimator validity, change in flight mode, etc. Monitor hardware system health. This includes CPU load, memory ussage, or sensor uptime. TODO add more explicits to what is monitored: XRCE-DSS link heath, temperature, critical process and node liveness. Fault Classification A fault is an observed condition that invalidates one or more safety assumptions required for autonomy. Any node can send a fault to the supervisor for handling if it determines that a safety contraint is not met. A warning is an observed condition that does not break the safety assumptions used for informational use. The supervisor is responsible for classifying the faults it receieves and deciding the appropriate action to take based on the severity of the fault. Fault handling follows a match and action model. Match the fault to the severity level and perform an action based on it. Actions could range from lease revocation, to flight control mode switches, to execution of emergency procedures. The supervisor must used the control layer to perform an action since it does not have direct communication with the flight controller. This type of interaction is done with directives that the supervisor gives to the control layer. Directive action have absolute priority over intents send by the decision layer. The control layer must execute the appropriate commands based on the directive while maintaining the handshake with the flight controller. TODO add example table for severity levels. TODO add examples of directives sent to the flight controller.","title":"Supervisor"},{"location":"architecture/supervisor/#supervisorwatchdog-layer","text":"The supervisor is the safety authority of the companion computer. It determines whether autonomy is allowed to act, under what constraints can autonomy act, and what actions must occur to keep the drone in a safe state. The architecture is designed around the PX4 authority model which treats offboard control as advisory, revocable and non-authoritative.","title":"Supervisor/Watchdog Layer"},{"location":"architecture/supervisor/#px4-authority-model","text":"notes: - supervisor works on top of PX4 safety, PX4 can independelty trigger failsafes and change modes and the supervisor will be able to react by revoking lease and maintaining a safe internal state.","title":"PX4 Authority model"},{"location":"architecture/supervisor/#supervisor-position-in-stack","text":"The Supervisor sits above the Control and Decision layers in terms of authority, but has a different set of responsibilities The decision layer decides what the system would like to do. The control alyer decides how to safety express those decision to the flight controller. The supervisor decide whether either of those layers is allowed to influence the vehicle at all. The supervisor's responsiblity is to authorize autonomy, send explcit directives to the control layer to perform safe actions, and classify faults to determine what directive to take. The supervisor does not have direct communication to the flight controller so if the supervisor needs to perfrom an action in the name of safety it must do so through control layer directives.","title":"Supervisor Position in Stack"},{"location":"architecture/supervisor/#lease-manager","text":"The lease manager is the supervisor's primary enforcement mechanmism for the execution of autonomy in the stack. The lease manager has the following responsibilities: Grant leases to the control layer when certain preconditions are met. Periodically renew leases while conditions remain valid. Revoke leases. Examples of reasons to revoke a lease: safety violation, fault classification requiring loss of autonomy, loss of heartbeat from control or decision layers, or PX4 flightmode change out of offboard. Each layer that is under the Supervisor is lease-gated. The control layer is lease-gated from actuation (commands send to PX4 based off of intent by the decision layer) and the decision layer is gated from sending intent to the control layer. Control layer will still be able to send fallback setpoints to the flight controller even if the lease is invalid, it will also send commands to maintain the handshake between the control layer and the flight controller. The lease only gates commands that was previously intent from the decision layer. TODO what are precondixtoins for granting/renewing a lease? TODO how long is a lease and when does it get renewed?","title":"Lease Manager"},{"location":"architecture/supervisor/#health-monitoring","text":"The supervisor continuously monitors the health of the software running in the stack, the hardware that the stack is running on, and the condition of the flight controller. Monitors heartbeats from the control and decision layer. Heartbeat loss is treated as a fault and will be handled in fault classification. Monitor the control loop in the control layer to ensure that timing is being met. Monitor vehicle health given information from the flight controller. This could include failsafe flags, estimator validity, change in flight mode, etc. Monitor hardware system health. This includes CPU load, memory ussage, or sensor uptime. TODO add more explicits to what is monitored: XRCE-DSS link heath, temperature, critical process and node liveness.","title":"Health Monitoring"},{"location":"architecture/supervisor/#fault-classification","text":"A fault is an observed condition that invalidates one or more safety assumptions required for autonomy. Any node can send a fault to the supervisor for handling if it determines that a safety contraint is not met. A warning is an observed condition that does not break the safety assumptions used for informational use. The supervisor is responsible for classifying the faults it receieves and deciding the appropriate action to take based on the severity of the fault. Fault handling follows a match and action model. Match the fault to the severity level and perform an action based on it. Actions could range from lease revocation, to flight control mode switches, to execution of emergency procedures. The supervisor must used the control layer to perform an action since it does not have direct communication with the flight controller. This type of interaction is done with directives that the supervisor gives to the control layer. Directive action have absolute priority over intents send by the decision layer. The control layer must execute the appropriate commands based on the directive while maintaining the handshake with the flight controller. TODO add example table for severity levels. TODO add examples of directives sent to the flight controller.","title":"Fault Classification"},{"location":"getting-started/installation/","text":"","title":"Installation"},{"location":"tutorials/overview/","text":"","title":"Overview"}]}